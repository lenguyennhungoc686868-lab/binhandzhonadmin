local player = game.Players.LocalPlayer
local lighting = game:GetService("Lighting")
local runService = game:GetService("RunService")

-- GUI
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "UltraFastMode"

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0,260,0,160)
frame.Position = UDim2.new(0.5,-130,0.5,-80)
frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
frame.BackgroundTransparency = 0.2
frame.Active = true
frame.Draggable = true

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1,0,0,30)
title.BackgroundTransparency = 1
title.Text = "âš¡ ULTRA FAST FLAG MODE"
title.TextColor3 = Color3.new(1,1,1)

local button = Instance.new("TextButton", frame)
button.Size = UDim2.new(0.8,0,0,40)
button.Position = UDim2.new(0.1,0,0.35,0)
button.Text = "ACTIVATE"
button.BackgroundColor3 = Color3.fromRGB(40,40,40)
button.TextColor3 = Color3.new(1,1,1)

local fpsLabel = Instance.new("TextLabel", frame)
fpsLabel.Size = UDim2.new(1,0,0,30)
fpsLabel.Position = UDim2.new(0,0,0.75,0)
fpsLabel.BackgroundTransparency = 1
fpsLabel.TextColor3 = Color3.new(0,1,0)
fpsLabel.Text = "FPS: Calculating..."

-- FPS Counter
local last = tick()
local frames = 0

runService.RenderStepped:Connect(function()
	frames += 1
	if tick() - last >= 1 then
		fpsLabel.Text = "FPS: "..frames
		frames = 0
		last = tick()
	end
end)

-- Optimization Function
local function optimize()
	lighting.GlobalShadows = false
	lighting.FogEnd = 1000000
	lighting.Brightness = 1
	
	for _,v in pairs(lighting:GetChildren()) do
		if v:IsA("PostEffect") then
			v.Enabled = false
		end
	end
	
	for _,v in pairs(workspace:GetDescendants()) do
		if v:IsA("ParticleEmitter") or v:IsA("Trail") then
			v.Enabled = false
		end
		if v:IsA("BasePart") then
			v.Material = Enum.Material.Plastic
			v.Reflectance = 0
		end
	end
	
	settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
end

-- Loading Animation
local function loading()
	button.Text = "LOADING 0%"
	for i = 1,100 do
		button.Text = "LOADING "..i.."%"
		task.wait(0.01)
	end
end

local active = false

button.MouseButton1Click:Connect(function()
	if not active then
		active = true
		loading()
		optimize()
		button.Text = "ENABLED"
		button.BackgroundColor3 = Color3.fromRGB(0,170,0)
	end
end)
